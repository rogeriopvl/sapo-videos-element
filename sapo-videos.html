<link rel="import" href="bower_components/polymer/polymer.html">

<!--
Element that embeds videos from Sapo Videos

##### Example

    <sapo-videos container="#video-container" videourl="..."></sapo-videos>

@element sapo-videos
@blurb Element that embeds videos from Sapo Videos
@status alpha
@homepage http://rogeriopvl.github.io/sapo-videos-element
-->
<polymer-element name="sapo-videos" attributes="videourl container width height hd">

  <template>

    <style>
      :host {
        display: block;
      }
    </style>

    <content></content>

  </template>

  <script>

    Polymer('sapo-videos', {
        videourl: null,
        width: '500',
        height: '436',
        container: null,

        ready: function () {
          if (this.videourl) {
            this.buildEmbed();
          }
        },

        buildEmbed: function () {
          var iframe = document.createElement('iframe');
          iframe.style.border = 'none';
          iframe.src = '//videos.sapo.pt/playhtml?file=' + this.videourl + '/mov/1';

          if (this.hd) {
            iframe.src += '&quality=hd';
          }

          iframe.width = this.width;
          iframe.height = this.height;

          this.insertEmbed(iframe);
        },

        insertEmbed: function (iframe) {
          if (this.container) {
            var el;
            el = document.querySelector(this.container);
            el.appendChild(iframe);
          } else {
            if (this.parentNode.lastChild == this) {
              this.parentNode.appendChild(iframe);
            } else {
              this.parentNode.insertBefore(iframe, this.nextSibling);
            }
          }
        }
    });

  </script>

</polymer-element>
